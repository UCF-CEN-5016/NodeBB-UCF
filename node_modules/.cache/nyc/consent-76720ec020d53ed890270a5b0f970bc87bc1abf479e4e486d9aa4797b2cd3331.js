'use strict';function cov_1leb5lc8qa(){var path="/home/vardhan/assignment-2/src/controllers/accounts/consent.js";var hash="cdc376cf41f9c92aa95d56dbd6a0d1161726ddd3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/vardhan/assignment-2/src/controllers/accounts/consent.js",statementMap:{"0":{start:{line:3,column:11},end:{line:3,column:36}},"1":{start:{line:4,column:13},end:{line:4,column:34}},"2":{start:{line:5,column:16},end:{line:5,column:37}},"3":{start:{line:6,column:23},end:{line:6,column:43}},"4":{start:{line:8,column:26},end:{line:8,column:40}},"5":{start:{line:10,column:0},end:{line:30,column:2}},"6":{start:{line:11,column:4},end:{line:13,column:5}},"7":{start:{line:12,column:8},end:{line:12,column:22}},"8":{start:{line:15,column:21},end:{line:15,column:104}},"9":{start:{line:16,column:4},end:{line:18,column:5}},"10":{start:{line:17,column:8},end:{line:17,column:22}},"11":{start:{line:19,column:22},end:{line:19,column:85}},"12":{start:{line:20,column:4},end:{line:20,column:58}},"13":{start:{line:21,column:4},end:{line:24,column:6}},"14":{start:{line:26,column:4},end:{line:26,column:46}},"15":{start:{line:27,column:4},end:{line:27,column:154}},"16":{start:{line:29,column:4},end:{line:29,column:44}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:24},end:{line:10,column:25}},loc:{start:{line:10,column:56},end:{line:30,column:1}},line:10}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:11,column:4},end:{line:13,column:5}}],line:11},"1":{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:16,column:4},end:{line:18,column:5}}],line:16},"2":{loc:{start:{line:22,column:19},end:{line:22,column:55}},type:"binary-expr",locations:[{start:{line:22,column:19},end:{line:22,column:46}},{start:{line:22,column:50},end:{line:22,column:55}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cdc376cf41f9c92aa95d56dbd6a0d1161726ddd3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1leb5lc8qa=function(){return actualCoverage;};}return actualCoverage;}cov_1leb5lc8qa();const db=(cov_1leb5lc8qa().s[0]++,require('../../database'));const meta=(cov_1leb5lc8qa().s[1]++,require('../../meta'));const helpers=(cov_1leb5lc8qa().s[2]++,require('../helpers'));const accountHelpers=(cov_1leb5lc8qa().s[3]++,require('./helpers'));const consentController=(cov_1leb5lc8qa().s[4]++,module.exports);cov_1leb5lc8qa().s[5]++;consentController.get=async function(req,res,next){cov_1leb5lc8qa().f[0]++;cov_1leb5lc8qa().s[6]++;if(!meta.config.gdpr_enabled){cov_1leb5lc8qa().b[0][0]++;cov_1leb5lc8qa().s[7]++;return next();}else{cov_1leb5lc8qa().b[0][1]++;}const userData=(cov_1leb5lc8qa().s[8]++,await accountHelpers.getUserDataByUserSlug(req.params.userslug,req.uid,req.query));cov_1leb5lc8qa().s[9]++;if(!userData){cov_1leb5lc8qa().b[1][0]++;cov_1leb5lc8qa().s[10]++;return next();}else{cov_1leb5lc8qa().b[1][1]++;}const consented=(cov_1leb5lc8qa().s[11]++,await db.getObjectField(`user:${userData.uid}`,'gdpr_consent'));cov_1leb5lc8qa().s[12]++;userData.gdpr_consent=parseInt(consented,10)===1;cov_1leb5lc8qa().s[13]++;userData.digest={frequency:(cov_1leb5lc8qa().b[2][0]++,meta.config.dailyDigestFreq)||(cov_1leb5lc8qa().b[2][1]++,'off'),enabled:meta.config.dailyDigestFreq!=='off'};cov_1leb5lc8qa().s[14]++;userData.title='[[user:consent.title]]';cov_1leb5lc8qa().s[15]++;userData.breadcrumbs=helpers.buildBreadcrumbs([{text:userData.username,url:`/user/${userData.userslug}`},{text:'[[user:consent.title]]'}]);cov_1leb5lc8qa().s[16]++;res.render('account/consent',userData);};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWxlYjVsYzhxYSIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInMiLCJmIiwiYiIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJkYiIsInJlcXVpcmUiLCJtZXRhIiwiaGVscGVycyIsImFjY291bnRIZWxwZXJzIiwiY29uc2VudENvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsImNvbmZpZyIsImdkcHJfZW5hYmxlZCIsInVzZXJEYXRhIiwiZ2V0VXNlckRhdGFCeVVzZXJTbHVnIiwicGFyYW1zIiwidXNlcnNsdWciLCJ1aWQiLCJxdWVyeSIsImNvbnNlbnRlZCIsImdldE9iamVjdEZpZWxkIiwiZ2Rwcl9jb25zZW50IiwicGFyc2VJbnQiLCJkaWdlc3QiLCJmcmVxdWVuY3kiLCJkYWlseURpZ2VzdEZyZXEiLCJlbmFibGVkIiwidGl0bGUiLCJicmVhZGNydW1icyIsImJ1aWxkQnJlYWRjcnVtYnMiLCJ0ZXh0IiwidXNlcm5hbWUiLCJ1cmwiLCJyZW5kZXIiXSwic291cmNlcyI6WyJjb25zZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZGIgPSByZXF1aXJlKCcuLi8uLi9kYXRhYmFzZScpO1xuY29uc3QgbWV0YSA9IHJlcXVpcmUoJy4uLy4uL21ldGEnKTtcbmNvbnN0IGhlbHBlcnMgPSByZXF1aXJlKCcuLi9oZWxwZXJzJyk7XG5jb25zdCBhY2NvdW50SGVscGVycyA9IHJlcXVpcmUoJy4vaGVscGVycycpO1xuXG5jb25zdCBjb25zZW50Q29udHJvbGxlciA9IG1vZHVsZS5leHBvcnRzO1xuXG5jb25zZW50Q29udHJvbGxlci5nZXQgPSBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcbiAgICBpZiAoIW1ldGEuY29uZmlnLmdkcHJfZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgYWNjb3VudEhlbHBlcnMuZ2V0VXNlckRhdGFCeVVzZXJTbHVnKHJlcS5wYXJhbXMudXNlcnNsdWcsIHJlcS51aWQsIHJlcS5xdWVyeSk7XG4gICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICByZXR1cm4gbmV4dCgpO1xuICAgIH1cbiAgICBjb25zdCBjb25zZW50ZWQgPSBhd2FpdCBkYi5nZXRPYmplY3RGaWVsZChgdXNlcjoke3VzZXJEYXRhLnVpZH1gLCAnZ2Rwcl9jb25zZW50Jyk7XG4gICAgdXNlckRhdGEuZ2Rwcl9jb25zZW50ID0gcGFyc2VJbnQoY29uc2VudGVkLCAxMCkgPT09IDE7XG4gICAgdXNlckRhdGEuZGlnZXN0ID0ge1xuICAgICAgICBmcmVxdWVuY3k6IG1ldGEuY29uZmlnLmRhaWx5RGlnZXN0RnJlcSB8fCAnb2ZmJyxcbiAgICAgICAgZW5hYmxlZDogbWV0YS5jb25maWcuZGFpbHlEaWdlc3RGcmVxICE9PSAnb2ZmJyxcbiAgICB9O1xuXG4gICAgdXNlckRhdGEudGl0bGUgPSAnW1t1c2VyOmNvbnNlbnQudGl0bGVdXSc7XG4gICAgdXNlckRhdGEuYnJlYWRjcnVtYnMgPSBoZWxwZXJzLmJ1aWxkQnJlYWRjcnVtYnMoW3sgdGV4dDogdXNlckRhdGEudXNlcm5hbWUsIHVybDogYC91c2VyLyR7dXNlckRhdGEudXNlcnNsdWd9YCB9LCB7IHRleHQ6ICdbW3VzZXI6Y29uc2VudC50aXRsZV1dJyB9XSk7XG5cbiAgICByZXMucmVuZGVyKCdhY2NvdW50L2NvbnNlbnQnLCB1c2VyRGF0YSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUMsU0FBQUEsZUFBQSxNQUFBQyxJQUFBLHNFQUFBQyxJQUFBLGdEQUFBQyxNQUFBLEtBQUFDLFFBQUEsc0JBQUFDLEdBQUEsb0JBQUFDLFlBQUEsRUFBQUwsSUFBQSxrRUFBQU0sWUFBQSxPQUFBQyxLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxVQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxVQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxhQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxPQUFBRSxLQUFBLE9BQUFDLElBQUEsaUJBQUFDLElBQUEsRUFBQU4sS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUssR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxLQUFBRCxJQUFBLE1BQUFPLFNBQUEsT0FBQUQsR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxLQUFBTyxJQUFBLE1BQUFDLFNBQUEsR0FBQVYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUYsS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsSUFBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUQsSUFBQSxVQUFBTSxHQUFBLEVBQUFQLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLElBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLEtBQUFPLElBQUEsTUFBQUMsU0FBQSxHQUFBVixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFG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