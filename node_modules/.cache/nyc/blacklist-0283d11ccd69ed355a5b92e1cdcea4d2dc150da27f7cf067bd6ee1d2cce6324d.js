'use strict';function cov_1wn4tr6j1s(){var path="/home/vardhan/assignment-2/src/socket.io/blacklist.js";var hash="8cb0441461fe93966581116138103e190aad1d7a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/vardhan/assignment-2/src/socket.io/blacklist.js",statementMap:{"0":{start:{line:4,column:13},end:{line:4,column:31}},"1":{start:{line:5,column:13},end:{line:5,column:31}},"2":{start:{line:6,column:15},end:{line:6,column:35}},"3":{start:{line:8,column:24},end:{line:8,column:38}},"4":{start:{line:10,column:0},end:{line:12,column:2}},"5":{start:{line:11,column:4},end:{line:11,column:47}},"6":{start:{line:14,column:0},end:{line:16,column:2}},"7":{start:{line:15,column:4},end:{line:15,column:43}},"8":{start:{line:18,column:0},end:{line:20,column:2}},"9":{start:{line:19,column:4},end:{line:19,column:45}},"10":{start:{line:23,column:31},end:{line:23,column:72}},"11":{start:{line:24,column:4},end:{line:26,column:5}},"12":{start:{line:25,column:8},end:{line:25,column:51}},"13":{start:{line:27,column:4},end:{line:27,column:39}},"14":{start:{line:28,column:4},end:{line:33,column:7}},"15":{start:{line:36,column:0},end:{line:36,column:41}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:27},end:{line:10,column:28}},loc:{start:{line:10,column:57},end:{line:12,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:23},end:{line:14,column:24}},loc:{start:{line:14,column:54},end:{line:16,column:1}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:56},end:{line:20,column:1}},line:18},"3":{name:"blacklist",decl:{start:{line:22,column:15},end:{line:22,column:24}},loc:{start:{line:22,column:47},end:{line:34,column:1}},line:22}},branchMap:{"0":{loc:{start:{line:24,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:26,column:5}},{start:{line:24,column:4},end:{line:26,column:5}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8cb0441461fe93966581116138103e190aad1d7a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1wn4tr6j1s=function(){return actualCoverage;};}return actualCoverage;}cov_1wn4tr6j1s();const user=(cov_1wn4tr6j1s().s[0]++,require('../user'));const meta=(cov_1wn4tr6j1s().s[1]++,require('../meta'));const events=(cov_1wn4tr6j1s().s[2]++,require('../events'));const SocketBlacklist=(cov_1wn4tr6j1s().s[3]++,module.exports);cov_1wn4tr6j1s().s[4]++;SocketBlacklist.validate=async function(socket,data){cov_1wn4tr6j1s().f[0]++;cov_1wn4tr6j1s().s[5]++;return meta.blacklist.validate(data.rules);};cov_1wn4tr6j1s().s[6]++;SocketBlacklist.save=async function(socket,rules){cov_1wn4tr6j1s().f[1]++;cov_1wn4tr6j1s().s[7]++;await blacklist(socket,'save',rules);};cov_1wn4tr6j1s().s[8]++;SocketBlacklist.addRule=async function(socket,rule){cov_1wn4tr6j1s().f[2]++;cov_1wn4tr6j1s().s[9]++;await blacklist(socket,'addRule',rule);};async function blacklist(socket,method,rule){cov_1wn4tr6j1s().f[3]++;const isAdminOrGlobalMod=(cov_1wn4tr6j1s().s[10]++,await user.isAdminOrGlobalMod(socket.uid));cov_1wn4tr6j1s().s[11]++;if(!isAdminOrGlobalMod){cov_1wn4tr6j1s().b[0][0]++;cov_1wn4tr6j1s().s[12]++;throw new Error('[[error:no-privileges]]');}else{cov_1wn4tr6j1s().b[0][1]++;}cov_1wn4tr6j1s().s[13]++;await meta.blacklist[method](rule);cov_1wn4tr6j1s().s[14]++;await events.log({type:`ip-blacklist-${method}`,uid:socket.uid,ip:socket.ip,rule:rule});}cov_1wn4tr6j1s().s[15]++;require('../promisify')(SocketBlacklist);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXduNHRyNmoxcyIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwidHlwZSIsImxvY2F0aW9ucyIsInMiLCJmIiwiYiIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJ1c2VyIiwicmVxdWlyZSIsIm1ldGEiLCJldmVudHMiLCJTb2NrZXRCbGFja2xpc3QiLCJtb2R1bGUiLCJleHBvcnRzIiwidmFsaWRhdGUiLCJzb2NrZXQiLCJkYXRhIiwiYmxhY2tsaXN0IiwicnVsZXMiLCJzYXZlIiwiYWRkUnVsZSIsInJ1bGUiLCJtZXRob2QiLCJpc0FkbWluT3JHbG9iYWxNb2QiLCJ1aWQiLCJFcnJvciIsImxvZyIsImlwIl0sInNvdXJjZXMiOlsiYmxhY2tsaXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB1c2VyID0gcmVxdWlyZSgnLi4vdXNlcicpO1xuY29uc3QgbWV0YSA9IHJlcXVpcmUoJy4uL21ldGEnKTtcbmNvbnN0IGV2ZW50cyA9IHJlcXVpcmUoJy4uL2V2ZW50cycpO1xuXG5jb25zdCBTb2NrZXRCbGFja2xpc3QgPSBtb2R1bGUuZXhwb3J0cztcblxuU29ja2V0QmxhY2tsaXN0LnZhbGlkYXRlID0gYXN5bmMgZnVuY3Rpb24gKHNvY2tldCwgZGF0YSkge1xuICAgIHJldHVybiBtZXRhLmJsYWNrbGlzdC52YWxpZGF0ZShkYXRhLnJ1bGVzKTtcbn07XG5cblNvY2tldEJsYWNrbGlzdC5zYXZlID0gYXN5bmMgZnVuY3Rpb24gKHNvY2tldCwgcnVsZXMpIHtcbiAgICBhd2FpdCBibGFja2xpc3Qoc29ja2V0LCAnc2F2ZScsIHJ1bGVzKTtcbn07XG5cblNvY2tldEJsYWNrbGlzdC5hZGRSdWxlID0gYXN5bmMgZnVuY3Rpb24gKHNvY2tldCwgcnVsZSkge1xuICAgIGF3YWl0IGJsYWNrbGlzdChzb2NrZXQsICdhZGRSdWxlJywgcnVsZSk7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBibGFja2xpc3Qoc29ja2V0LCBtZXRob2QsIHJ1bGUpIHtcbiAgICBjb25zdCBpc0FkbWluT3JHbG9iYWxNb2QgPSBhd2FpdCB1c2VyLmlzQWRtaW5Pckdsb2JhbE1vZChzb2NrZXQudWlkKTtcbiAgICBpZiAoIWlzQWRtaW5Pckdsb2JhbE1vZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tbZXJyb3I6bm8tcHJpdmlsZWdlc11dJyk7XG4gICAgfVxuICAgIGF3YWl0IG1ldGEuYmxhY2tsaXN0W21ldGhvZF0ocnVsZSk7XG4gICAgYXdhaXQgZXZlbnRzLmxvZyh7XG4gICAgICAgIHR5cGU6IGBpcC1ibGFja2xpc3QtJHttZXRob2R9YCxcbiAgICAgICAgdWlkOiBzb2NrZXQudWlkLFxuICAgICAgICBpcDogc29ja2V0LmlwLFxuICAgICAgICBydWxlOiBydWxlLFxuICAgIH0pO1xufVxuXG5yZXF1aXJlKCcuLi9wcm9taXNpZnknKShTb2NrZXRCbGFja2xpc3QpO1xuIl0sIm1hcHBpbmdzIjoiQUFDQSxZQUFZLENBQUMsU0FBQUEsZUFBQSxNQUFBQyxJQUFBLDZEQUFBQyxJQUFBLGdEQUFBQyxNQUFBLEtBQUFDLFFBQUEsc0JBQUFDLEdBQUEsb0JBQUFDLFlBQUEsRUFBQUwsSUFBQSx5REFBQU0sWUFBQSxPQUFBQyxLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsR0FBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsR0FBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxVQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxVQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxVQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxZQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxXQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxPQUFBRSxLQUFBLE9BQUFDLElBQUEsaUJBQUFDLElBQUEsRUFBQU4sS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUssR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxLQUFBRCxJQUFBLFVBQUFJLElBQUEsaUJBQUFDLElBQUEsRUFBQU4sS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUssR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxLQUFBRCxJQUFBLFVBQUFJLElBQUEsaUJBQUFDLElBQUEsRUFBQU4sS0FBQSxFQUFBQyxJQUFBLElBQUFDLE1BQUEsS0FBQUMsR0FBQSxFQUFBRixJQUFBLElBQUFDLE1BQUEsTUFBQUssR0FBQSxFQUFBUCxLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxLQUFBRCxJQUFBLFVBQUFJLElBQUEsYUFBQUMsSUFBQSxFQUFBTixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxLQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxNQUFBSyxHQUFBLEVBQUFQLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLEtBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLEtBQUFELElBQUEsTUFBQU8sU0FBQSxPQUFBRCxHQUFBLEVBQUFQLEtBQUEsRUFBQUMsSUFBQSxJQUFBQyxNQUFBLElBQUFDLEdBQUEsRUFBQUYsSUFBQSxJQUFBQyxNQUFBLEtBQUFPLElBQUEsTUFBQUMsU0FBQSxHQUFBVixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMsTUFBQSxNQUFBRixLQUFBLEVBQUFDLElBQUEsSUFBQUMsTUFBQSxJQUFBQyxHQUFBLEVBQUFGLElBQUEsSUFBQUMs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